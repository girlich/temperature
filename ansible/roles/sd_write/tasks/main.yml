---
- name: Get the information about the device
  ansible.builtin.shell:
    cmd: "ls -l /dev/disk/by-id|grep \\.\\./\\.\\./{{ sd_name }}"
  register: result
- name: Wait for confirmation to overwrite the device
  ansible.builtin.pause:
    prompt: "{{ result }}"
- name: Write image to the sd card
  ansible.builtin.command:
    cmd: "dd if={{ image_file }} of={{ sd_device }} bs=10M status=progress"
  become: true
- name: Flush all buffers
  ansible.builtin.command:
    cmd: "sync"
